
drop database Hospital;
create database Hospital;
use Hospital;
create database hospital;
use hospital;
create table patient(patient_id int primary key auto_increment,patient_name varchar(20)not null,phone varchar(10),email varchar(30));

insert into patient (patient_name, phone, email) values ('rahul kumar', '9876543210', 'rahul@email.com');
insert into patient (patient_name, phone, email) values ('kumar', '9563214752', 'kumar@email.com');

insert into patient (patient_name, phone, email) values ('priya sharma', '8877665544', 'priya@email.com');
insert into patient (patient_name, phone, email) values ('amit verma', '7766554433', 'amit@email.com');

create table department(dept_id int primary key auto_increment,dept_name varchar(20)not null);

insert into department (dept_name) values ('cardiology');
insert into department (dept_name) values ('pediatrics');
insert into department (dept_name) values ('orthopedics');

create table doctor(doctor_id int primary key auto_increment,doctor_name varchar(30)not null,role varchar(20),dept_id int,patient_id int, foreign key (dept_id) references department(dept_id), foreign key (patient_id) references patient(patient_id));

insert into doctor (doctor_name, role, dept_id) values ('dr.Manu', 'senior surgeon', 1);
insert into doctor (doctor_name, role, dept_id) values ('dr.Sanjay', 'consultant', 2);
insert into doctor (doctor_name, role, dept_id) values ('dr.Sujith', 'specialist', 3);

create table appointment(app_id int primary key auto_increment,app_date DATETIME not null,status varchar(20) default 'scheduled',doctor_id int,patient_id int,foreign key (doctor_id) references doctor(doctor_id),
foreign key (patient_id) references patient(patient_id));

insert into appointment (app_date, status, doctor_id, patient_id) 
values ('2026-03-01 10:30:00', 'scheduled', 1, 1);

insert into appointment (app_date, status, doctor_id, patient_id) 
values ('2026-03-02 11:00:00', 'scheduled', 2, 2);

insert into appointment (app_date, status, doctor_id, patient_id) 
values ('2026-03-05 14:15:00', 'pending', 3, 3);

select * from doctor;
select * from patient;
select * from department;
select * from appointment;

select a.app_id, a.app_date, p.patient_name, a.status 
from appointment a
join doctor d on a.doctor_id = d.doctor_id
join patient p on a.patient_id = p.patient_id
where d.doctor_name = 'dr.Manu';

select dp.dept_name, count(distinct a.patient_id) as total_patients
from department dp
join doctor d on dp.dept_id = d.dept_id
join appointment a on d.doctor_id = a.doctor_id
group by dp.dept_name;

select a.app_date, p.patient_name, d.doctor_name, d.role
from appointment a
join patient p on a.patient_id = p.patient_id
join doctor d on a.doctor_id = d.doctor_id
where a.app_date >= now()
order by a.app_date asc;
